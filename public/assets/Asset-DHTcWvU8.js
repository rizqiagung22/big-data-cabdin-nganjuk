import{_ as w,a as h,r as k}from"./DataTable.vue_vue_type_script_setup_true_lang-CrAOSK21.js";import{a as P,d as v,u as B}from"./bksm.service-DpY17EgN.js";import{u as j,_ as A}from"./FilterBksm.vue_vue_type_script_setup_true_lang-BMKAHjG8.js";import{r as S,a as C}from"./FileSaver.min-B-5986Nb.js";import{d as D,r as d,l as u,c as $,b as e,e as i,w as c,F,i as M,t as _,u as m}from"./index-DLzQ0s9S.js";import"./axios.plugin-btxbHCK1.js";import"./global.service-Ccns7riZ.js";const O={class:"bg-white rounded-lg shadow overflow-hidden"},G={class:"text-gray-500"},T={class:"flex items-center space-x-2"},V={class:"text-gray-500 w-[80px] truncate w-[80px] truncate"},U={class:"flex gap-2"},E=["onClick"],I=["onClick"],N={class:"text-gray-400 hover:text-blue-500 transition-colors",title:"Upload"},R=["for"],q=["id","onChange"],Y=D({__name:"Asset",setup(z){j();const g=d([]),f=[{key:"lembaga",label:""},{key:"bm_bos_tw_1",label:"BOS"},{key:"bm_bpopp_tw_1",label:"BPOPP"},{key:"bm_bantuan_pemerintah_tw_1",label:"Bantuan Pemerintah"},{key:"bm_pm_tw_1",label:"Partisipasi Masyarakat"},{key:"bm_bos_tw_2",label:"BOS"},{key:"bm_bpopp_tw_2",label:"BPOPP"},{key:"bm_bantuan_pemerintah_tw_2",label:"Bantuan Pemerintah"},{key:"bm_pm_tw_2",label:"Partisipasi Masyarakat"},{key:"bm_bos_tw_3",label:"BOS"},{key:"bm_bpopp_tw_3",label:"BPOPP"},{key:"bm_bantuan_pemerintah_tw_3",label:"Bantuan Pemerintah"},{key:"bm_pm_tw_3",label:"Partisipasi Masyarakat"},{key:"bm_bos_tw_4",label:"BOS"},{key:"bm_bpopp_tw_4",label:"BPOPP"},{key:"bm_bantuan_pemerintah_tw_4",label:"Bantuan Pemerintah"},{key:"bm_pm_tw_4",label:"Partisipasi Masyarakat"},{key:"bm_bos_tw_4",label:"SCAN"},{key:"bm_pm_tw_4",label:"Sertifikat"}],l=d({currentPage:1,itemsPerPage:10,totalItems:0}),r=async(s=!1)=>{};u(()=>l.value.currentPage,async()=>{await r()}),u(()=>l.value.itemsPerPage,async(s,t)=>{s!==t&&(l.value.currentPage=1,await r())});const b=async(s,t)=>{try{await P(s.id,s.name_file)}catch(a){a.status==404?alert("Gagal mengunduh file. File tidak ditemukan."):alert("Gagal mengunduh file. Silakan coba lagi.")}},y=async(s,t)=>{try{await v(s.id),await r()}catch(a){a.status==404?alert("Gagal mengahapus file. File tidak ditemukan."):alert("Gagal mengahapus file. Silakan coba lagi.")}},x=async(s,t,a,o)=>{console.log("upload");try{const n=s.target;if(n.files&&n.files.length>0){const p=new FormData;p.append("report_file",n.files[0]),await B(t.id,p),await r()}}catch{alert("Gagal upload file")}finally{const n=document.getElementById(o);n&&(n.value="")}};return(s,t)=>(M(),$(F,null,[t[3]||(t[3]=e("div",{class:"mb-4"},[e("h1",{class:"text-2xl font-bold text-gray-800"},"Asset")],-1)),i(A,{class:"mb-4",onSubmit:r}),e("div",O,[i(w,{class:"my-4 flex justify-end px-2",modelValue:l.value.itemsPerPage,"onUpdate:modelValue":t[0]||(t[0]=a=>l.value.itemsPerPage=a)},null,8,["modelValue"]),i(h,{columns:f,data:g.value,"total-items":l.value.totalItems,"items-per-page":l.value.itemsPerPage,currentPage:l.value.currentPage,"onUpdate:currentPage":t[1]||(t[1]=a=>l.value.currentPage=a)},{header:c(()=>[...t[2]||(t[2]=[e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th"),e("th",{class:"min-w-[300px] px-6 py-8 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Data Pengurusan Barang Sekolah"),e("th",{colspan:"4",class:"px-6 py-8 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",{class:"flex justify-center items-center"},[e("span",null,"Belanja Modal Asset Triwulan 1")])]),e("th",{colspan:"4",class:"px-6 py-8 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",{class:"flex justify-center items-center"},[e("span",null,"Belanja Modal Asset Triwulan 2")])]),e("th",{colspan:"4",class:"px-6 py-8 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",{class:"flex justify-center items-center"},[e("span",null,"Belanja Modal Asset Triwulan 3")])]),e("th",{colspan:"4",class:"px-6 py-8 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",{class:"flex justify-center items-center"},[e("span",null,"Belanja Modal Asset Triwulan 4")])]),e("th",{colspan:"4",class:"px-6 py-8 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",{class:"flex justify-center items-center"},[e("span",null,"Asset Tanah")])])])],-1)])]),"cell(lembaga)":c(({item:a})=>[e("span",G,_(a.jenjang),1)]),"cell(file)":c(({item:a})=>[e("div",T,[e("span",V,_(a.name_file??""),1),e("div",U,[e("div",{onClick:o=>b(a,"pagu"),class:"text-gray-400 hover:text-green-500 transition-colors",title:"Download"},[i(m(S),{class:"h-5 w-5"})],8,E),e("div",{onClick:o=>y(a,"pagu"),class:"text-gray-400 hover:text-red-500 transition-colors",title:"Delete"},[i(m(k),{class:"h-5 w-5"})],8,I),e("div",N,[e("label",{for:`item${a.id}`},[i(m(C),{class:"h-5 w-5"})],8,R),e("input",{type:"file",class:"hidden",id:`item${a.id}`,onChange:o=>x(o,a,"item",`item${a.id}`)},null,40,q)])])])]),_:1},8,["data","total-items","items-per-page","currentPage"])])],64))}});export{Y as default};
