import{d as h,r as u,o as c,c as d,a as x,u as o,b as e,e as r,w as v,T as y,f as k,h as _,g as w,i as n,j as S,k as A,_ as C}from"./index-u1HVbT82.js";import{u as L,a as T}from"./login.service-Cj21vl-7.js";import{S as j,r as M,a as B}from"./Sidebar-DMxPOW6j.js";import{H}from"./Header-DNE_GnW_.js";const N={key:0,class:"flex items-center justify-center h-screen bg-gray-100"},V={key:1,class:"flex h-screen bg-gray-100"},$={class:"flex-1 flex flex-col overflow-hidden"},z={class:"flex-1 overflow-y-auto p-6 bg-gray-50"},I={class:"bg-white rounded-lg shadow-xl w-full max-w-md m-4 transform transition-all text-center p-6 sm:p-8"},U={class:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-red-100"},q=h({__name:"Layout",setup(D){const s=L(),m=_(),f=u(!0),l=()=>{s.logout(),m.replace("/login")},a=u(!0),p={name:"Super Admin",email:"superadmin@",role:"Super Admin",avatar:"https://images.unsplash.com/photo-1633332755192-727a05c4013d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"};return c(async()=>{}),c(async()=>{const i=localStorage.getItem("auth_token");if(i&&!s.isAuthenticated)try{s.setLoading(!0),s.updateToken(i);const t=await T();s.setUser(t.data.user)}catch(t){console.error("Failed to log in:",t)}finally{s.setLoading(!1)}else s.setLoading(!1)}),(i,t)=>{const g=w("router-view");return o(s).isLoading?(n(),d("div",N,[...t[2]||(t[2]=[e("div",{class:"text-center"},[e("div",{class:"w-16 h-16 border-4 border-blue-500 border-dashed rounded-full animate-spin mx-auto"}),e("p",{class:"mt-4 text-gray-600"},"Memuat data...")],-1)])])):o(s).isAuthenticated&&o(s).user&&o(s).user?.role==="superadmin"?(n(),d("div",V,[r(j,{"is-collapsed":a.value,onToggle:t[0]||(t[0]=b=>a.value=!a.value)},null,8,["is-collapsed"]),e("div",$,[r(H,{user:p,"is-sidebar-collapsed":a.value,onToggleSidebar:t[1]||(t[1]=b=>a.value=!a.value)},null,8,["is-sidebar-collapsed"]),e("main",z,[r(g)])])])):(n(),x(k,{key:2,to:"body"},[r(y,{name:"modal-fade"},{default:v(()=>[f.value?(n(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",onClick:A(l,["self"])},[e("div",I,[e("div",U,[r(o(M),{class:"h-10 w-10 text-red-600","aria-hidden":"true"})]),e("button",{onClick:l,class:"absolute top-4 right-4 p-1 rounded-full text-gray-400 hover:bg-gray-200 hover:text-gray-600 transition-colors"},[r(o(B),{class:"h-6 w-6"})]),t[3]||(t[3]=e("div",{class:"mt-4"},[e("h3",{class:"text-xl font-semibold text-gray-900"},"Akses Ditolak"),e("p",{class:"mt-2 text-sm text-gray-600"}," Maaf, Anda tidak memiliki izin yang cukup untuk mengakses halaman ini. Silakan hubungi administrator jika Anda merasa ini adalah sebuah kesalahan. ")],-1)),e("div",{class:"mt-6"},[e("button",{onClick:l,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent bg-purple-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:text-sm transition-colors"}," Kembali ke Halaman Awal ")])])])):S("",!0)]),_:1})]))}}}),R=C(q,[["__scopeId","data-v-16f529b7"]]);export{R as default};
