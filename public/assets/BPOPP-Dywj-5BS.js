import{u as P,_ as b,a as k,b as C,r as p,c as u,d as _,g as B,e as D,f as $}from"./FilterBpopp.vue_vue_type_script_setup_true_lang-XI5tJM92.js";import{u as S}from"./tahun.strore-ZLG-RHnC.js";import{d as U,r as m,l as y,c as F,b as e,e as s,w as i,F as A,i as V,t as r,u as l}from"./index-C2Jg13uz.js";import"./axios.plugin-kNBfGAwQ.js";const G={class:"bg-white rounded-lg shadow overflow-hidden"},I={class:"text-gray-500"},N={class:"flex items-center space-x-2"},O={class:"text-gray-500 w-[80px] truncate w-[80px] truncate"},R={class:"flex gap-2"},j=["onClick"],K=["onClick"],T={class:"text-gray-400 hover:text-blue-500 transition-colors",title:"Upload"},z={class:"flex items-center space-x-2"},E={class:"text-gray-500 w-[80px] truncate"},L={class:"flex gap-2"},q={class:"text-gray-400 hover:text-green-500 transition-colors",title:"Download"},H=["onClick"],J={class:"text-gray-400 hover:text-blue-500 transition-colors",title:"Upload"},M={class:"flex items-center space-x-2"},Q={class:"text-gray-500 w-[80px] truncate"},W={class:"flex gap-2"},X={class:"text-gray-400 hover:text-green-500 transition-colors",title:"Download"},Y=["onClick"],Z={class:"text-gray-400 hover:text-blue-500 transition-colors",title:"Upload"},ee={class:"flex items-center space-x-2"},ae={class:"text-gray-500 w-[80px] truncate"},te={class:"flex gap-2"},se={class:"text-gray-400 hover:text-green-500 transition-colors",title:"Download"},le=["onClick"],ne={class:"text-gray-400 hover:text-blue-500 transition-colors",title:"Upload"},oe={class:"flex items-center space-x-2"},ie={class:"text-gray-500 w-[80px] truncate"},re={class:"flex gap-2"},ce={class:"text-gray-400 hover:text-green-500 transition-colors",title:"Download"},de=["onClick"],pe={class:"text-gray-400 hover:text-blue-500 transition-colors",title:"Upload"},xe=U({__name:"BPOPP",setup(ue){S();const v=P(),g=m([]),f=[{key:"lembaga",label:"Nama Lembaga"},{key:"pagu",label:"Pagu"},{key:"rkas",label:"RKAS"},{key:"realisasi",label:"Realisasi"},{key:"usulan_per_bulan",label:"Usulan Per Bulan"},{key:"penyerapan_tiap_bulan",label:"Penyerapan Tiap Bulan"}],n=m({currentPage:1,itemsPerPage:10,totalItems:0}),x=()=>{n.value={currentPage:1,itemsPerPage:10,totalItems:0}},h=async(o=!1)=>{try{o&&x();const t=await B({search:v.search,tahun_id:v.tahun,page:n.value.currentPage,size:n.value.itemsPerPage});g.value=[...t.data.data.data],n.value.totalItems=t.data.data.total}catch(t){console.log(t),g.value=[],x()}};y(()=>n.value.currentPage,async()=>{await h()}),y(()=>n.value.itemsPerPage,async(o,t)=>{o!==t&&(n.value.currentPage=1,await h())});const w=async(o,t)=>{try{await D(o.laporan?.[t]?.id,o.laporan?.[t]?.name_file)}catch(a){a.status==404?alert("Gagal mengunduh file. File tidak ditemukan."):alert("Gagal mengunduh file. Silakan coba lagi.")}},c=async(o,t)=>{try{await $(o.laporan?.[t]?.id)}catch(a){a.status==404?alert("Gagal mengunduh file. File tidak ditemukan."):alert("Gagal mengunduh file. Silakan coba lagi.")}};return(o,t)=>(V(),F(A,null,[t[2]||(t[2]=e("div",{class:"mb-4"},[e("h1",{class:"text-2xl font-bold text-gray-800"},"BPOPP"),e("p",{class:"text-gray-600"},"Kelola data Bantuan Penunjang Operasinal Penyelenggaran Pendidikan")],-1)),s(C,{class:"mb-4",onSubmit:h}),e("div",G,[s(b,{class:"my-4 flex justify-end px-2",modelValue:n.value.itemsPerPage,"onUpdate:modelValue":t[0]||(t[0]=a=>n.value.itemsPerPage=a)},null,8,["modelValue"]),s(k,{columns:f,data:g.value,"total-items":n.value.totalItems,"items-per-page":n.value.itemsPerPage,currentPage:n.value.currentPage,"onUpdate:currentPage":t[1]||(t[1]=a=>n.value.currentPage=a)},{"cell(lembaga)":i(({item:a})=>[e("span",I,r(a.lembaga.nama),1)]),"cell(pagu)":i(({item:a})=>[e("div",N,[e("span",O,r(a.laporan?.pagu?.name_file??""),1),e("div",R,[e("div",{onClick:d=>w(a,"pagu"),class:"text-gray-400 hover:text-green-500 transition-colors",title:"Download"},[s(l(p),{class:"h-5 w-5"})],8,j),e("div",{onClick:d=>c(a,"pagu"),class:"text-gray-400 hover:text-red-500 transition-colors",title:"Delete"},[s(l(u),{class:"h-5 w-5"})],8,K),e("div",T,[s(l(_),{class:"h-5 w-5"})])])])]),"cell(rkas)":i(({item:a})=>[e("div",z,[e("span",E,r(a.laporan?.rkas?.name_file??""),1),e("div",L,[e("div",q,[s(l(p),{class:"h-5 w-5"})]),e("div",{onClick:d=>c(a,"rkas"),class:"text-gray-400 hover:text-red-500 transition-colors",title:"Delete"},[s(l(u),{class:"h-5 w-5"})],8,H),e("div",J,[s(l(_),{class:"h-5 w-5"})])])])]),"cell(realisasi)":i(({item:a})=>[e("div",M,[e("span",Q,r(a.laporan?.realisasi?.name_file??""),1),e("div",W,[e("div",X,[s(l(p),{class:"h-5 w-5"})]),e("div",{onClick:d=>c(a,"realisasi"),class:"text-gray-400 hover:text-red-500 transition-colors",title:"Delete"},[s(l(u),{class:"h-5 w-5"})],8,Y),e("div",Z,[s(l(_),{class:"h-5 w-5"})])])])]),"cell(usulan_per_bulan)":i(({item:a})=>[e("div",ee,[e("span",ae,r(a.laporan?.["usulan per bulan"]?.name_file??""),1),e("div",te,[e("div",se,[s(l(p),{class:"h-5 w-5"})]),e("div",{onClick:d=>c(a,"usulan per bulan"),class:"text-gray-400 hover:text-red-500 transition-colors",title:"Delete"},[s(l(u),{class:"h-5 w-5"})],8,le),e("div",ne,[s(l(_),{class:"h-5 w-5"})])])])]),"cell(penyerapan_tiap_bulan)":i(({item:a})=>[e("div",oe,[e("span",ie,r(a.laporan?.["penyerapan tiap bulan"]?.name_file??""),1),e("div",re,[e("div",ce,[s(l(p),{class:"h-5 w-5"})]),e("div",{onClick:d=>c(a,"penyerapan tiap bulan"),class:"text-gray-400 hover:text-red-500 transition-colors",title:"Delete"},[s(l(u),{class:"h-5 w-5"})],8,de),e("div",pe,[s(l(_),{class:"h-5 w-5"})])])])]),_:1},8,["data","total-items","items-per-page","currentPage"])])],64))}});export{xe as default};
