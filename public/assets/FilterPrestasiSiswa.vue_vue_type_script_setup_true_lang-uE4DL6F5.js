import{h as d}from"./axios.plugin-Cr9Ns81A.js";import{b as y,F as w}from"./FileSaver.min-CLWXV6HW.js";import{m as x,d as v,r as p,o as F,A as S,c as i,i as l,b as a,p as _,u as m,$ as k,F as T,E as A,t as E}from"./index-DisDyyuw.js";import{g as L}from"./global.service-WSUCU1y3.js";const U=async e=>{try{return await d.get("/prestasi-siswa",{params:e})}catch(s){throw console.error("Error caught in catch:",s),s.response}},q=async(e,s)=>{try{const t=await d.get(`/prestasi-siswa/download/${e}`,{responseType:"arraybuffer"}),c=`data:${t.headers["content-type"]};base64,${new y.Buffer(t.data,"binary").toString("base64")}`;w.saveAs(c,s)}catch(t){throw console.error("Error caught in catch:",t),t.response}},z=async e=>{try{await d.delete(`/prestasi-siswa/${e}`)}catch(s){throw console.error("Error caught in catch:",s),s.response}},G=async(e,s)=>{try{await d.post(`/prestasi-siswa/update-file/${e}`,s,{headers:{"Content-Type":"multipart/form-data"}})}catch(t){throw console.error("Error caught in catch:",t),t.response}},P=x("FilterAdminPrestasiSiswa",{state:()=>({search:"",tahun:null,tahunList:[]}),actions:{setSearch(e){this.search=e},setTahun(e){this.tahun=e},setTahunList(e){this.tahunList=e},resetFilter(){this.search="",this.tahun=null}}}),$={class:"bg-white p-6 rounded-lg shadow-md mx-auto"},D={class:"mb-6 flex items-center"},B={class:"w-3/4 relative"},C={key:0,type:"text",id:"tahun",placeholder:"Tidak ada data tahun",disabled:"",class:"block w-full disabled:cursor-not-allowed disabled:opacity-50 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2"},V=["value"],H=v({__name:"FilterPrestasiSiswa",emits:["submit"],setup(e,{emit:s}){const t=P(),c=p(""),o=p(null);F(async()=>{await f(),t.tahun!==null&&(o.value=t.tahun,await S(),h())});const f=async()=>{try{const u=await L();t.setTahunList(u.data.data)}catch(u){console.log(u)}},g=s,b=()=>{c.value="",o.value=null,t.resetFilter()},h=()=>{t.setSearch(c.value),t.setTahun(o.value),g("submit",!0)};return(u,r)=>(l(),i("div",$,[r[2]||(r[2]=a("h2",{class:"text-xl font-semibold text-gray-800 mb-4"},"Filter Data",-1)),a("div",null,[a("div",D,[r[1]||(r[1]=a("label",{for:"tahun",class:"w-1/4 text-sm font-medium text-gray-700 pr-4"},"Tahun",-1)),a("div",B,[m(t).tahunList.length==0?(l(),i("input",C)):_((l(),i("select",{key:1,"onUpdate:modelValue":r[0]||(r[0]=n=>o.value=n),id:"tahun",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2"},[(l(!0),i(T,null,A(m(t).tahunList,n=>(l(),i("option",{key:n.id,value:n.id},E(n.tahun),9,V))),128))],512)),[[k,o.value]])])]),a("div",{class:"flex justify-end space-x-2"},[a("button",{onClick:b,type:"button",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-gray-700 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors"}," Reset "),a("button",{onClick:h,type:"button",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors"}," Terapkan Filter ")])])]))}});export{H as _,q as a,G as b,z as d,U as g,P as u};
